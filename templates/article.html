{% extends "base.html" %}
{% block title %}{{ article.title }}{% endblock %}

{% block extra_head %}
{% if 'angular' in article.include %}
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script>
{% endif %}
{% if 'jquery' in article.include %}
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
{% endif %}
{% endblock %}

{% block content %}
<div class="container post">
  {% include 'nav.html' %}

    <article>
        <h1>{{ article.title }}</h1>
        {{ article.content }}
  </article>

    <div class="metadata">
        <div class="left">
            <strong>Published: </strong>
            <i>
                <time datetime="article.date.isoformat()" pubdate>{{ article.locale_date }}</time>
            </i>
            <div>
                <strong>Tags: </strong>
                {% for tag in article.tags %}
                    <a href="{{ SITEURL }}/{{ tag.url }}" class="tag"><i class="fa fa-tag"></i> {{ tag }}</a>
                {% endfor %}
            </div>
        </div>
        <div class="right">
            <a id="comments-button" class="read-more" href="#disqus_thread">Show/read comments</a>
        </div>
    </div>
    </div>

<script type="text/javascript">
(function () {
    'use strict';

    // Global object
    var App = {};

    // Create button
    App.commentsButton = document.getElementById('comments-button');

    App.commentsButton.onclick = function () {
        // Remove button on click
        App.commentsButton.onclick = function () {
        }

        // Create comments container
        App.disqusContainer = document.createElement('div');
        App.disqusContainer.setAttribute('id', 'disqus_thread');
        App.disqusContainer.setAttribute('class', 'container');

        // Append container to body
        var container = document.getElementsByClassName('container post')[0];
        container.appendChild(App.disqusContainer);
        // document.body.appendChild( App.disqusContainer );

        // Your Disqus shortname
        App.disqus_shortname = '{{ DISQUS_USERNAME }}';

        // Embed Disqus
        var dsq = document.createElement('script');

        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + App.disqus_shortname + '.disqus.com/embed.js';

        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

        window.scrollTo(0, dsq.offsetTop - 200);
    };
})();
</script>

</div>
{% endblock %}
